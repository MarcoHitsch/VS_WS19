<!DOCTYPE html>
<html>

<body>

    <h1>Verteilte Systeme Cars</h1>
    <button onclick="myFunction()">Click me</button>

    <div id="field" style="height:500px;width:500px; position:relative; border: 1px solid #00ff00;">

    </div>

</body>
<script>
    var cars = [];
    var top = 0;
    var left = 0;
    var url = "http://localhost:8000/car.json"

    function myFunction() {
        setPosition(top++, left++)
    }

    function httpGetAsync(theUrl) {
        var xhr = new XMLHttpRequest();
        xhr.open("GET", theUrl, true);
        xhr.onload = function (e) {
            if (xhr.readyState === 4) {
                if (xhr.status === 200) {
                    console.log(xhr.responseText);
                    setPosition(xhr.responseText.payload._xPart, xhr.responseText.payload._yPart)
                } else {
                    console.error(xhr.statusText);
                }
            }
        };
        xhr.onerror = function (e) {
            console.error(xhr.statusText);
        };
        xhr.send(null)
    }

    function drawCars() {
        for (let j = 0; j < 2; j++) {
            document.getElementById("field").appendChild(cars[j]);
        }
    }

    function setPosition(top, left) {
        for (let j = 0; j < 2; j++) {
            cars[j].style.top = top + "px";
            cars[j].style.left = left + "px";
        }
    }

    for (let i = 0; i < 2; i++) {
        let car1 = document.createElement("div");
        car1.style.width = "10px";
        car1.style.height = "10px";
        car1.style.background = i == 0 ? "red" : "#00ff00";
        car1.style.position = "absolute";
        car1.style.top = "0px";
        car1.style.left = i == 0 ? "0px" : "10px";
        car1.innerHTML = "";
        cars[i] = car1;
        document.getElementById("field").appendChild(car1);
    }
    drawCars();

    const interval = setInterval(function () {
        <!--setPosition(top++, left++);-->
        httpGetAsync(url)
    }, 500);
</script>

</html>